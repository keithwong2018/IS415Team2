---
title: "proximity analysis"
author: "Veronica Lee Xuan Hui"
date: "10/25/2020"
output: 
  html_document: 
  toc: true
  toc_float: true
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Load Packages
```{r}
packages = c('rgdal', 'sf', 'tmap', 'tidyverse', 'sp', 'rgeos','maptools', 'raster', 'spatstat', 'spdep', 'OpenStreetMap', 'tmaptools', 'spatialEco')
for (p in packages){
  if (!require(p, character.only = T)){
    install.packages(p)
  }
  library(p, character.only = T)
}
```


## Computing centroids for each planning area
```{r}
centroids <- st_centroid(mpsz_sf)
```
```{r}
st_crs(centroids)
```

```{r}
centroids_sp <- as_Spatial(centroids)
```


```{r}
plot(mpsz_sp, col='grey')
plot(centroids_sp, add=TRUE)
```
Combine the centroid and polygons
```{r}
mpsz_point <- point.in.poly(centroids, mpsz_sf, sp=FALSE, duplicate=FALSE)
```
```{r}
mpsz_point <- spTransform(mpsz_point, CRS('+init=epsg:3414'))
plot(mpsz_point)
```

## Proximity Analysis
Using Euclidean Distance

### Eldercare
```{r}
eldercare_sp <- spTransform(eldercare_sp, CRS('+init=epsg:3414'))
temp <- over(eldercare_sp, mpsz_point)
temp
```

```{r}
plot(mpsz_sf)
```


## Accessibility Analysis
To compute the accessibility of Eldercare services
```{r}
eldercare.access <- ac(mpsz_demand$`elderly_count`, mpsz_supply$`eldercare`)
```
